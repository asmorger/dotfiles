- name: Bootstrap development environment
  hosts: localhost

  vars_files:
    - ./variables.yml

  roles:
    #- nerd-fonts
    #- doom-emacs
    - zoxide
    #- starship
    #- next-dns
    - tailscale
    #- vscode
    #- color-scripts
    - dotnet
    #- jetbrains
    #- docker
  tasks:
  - name: Install OS specific tasks
    ansible.builtin.include_tasks: "{{ os_family }}_tasks.yml"

  - name: Run Stow
    shell: "stow . --target {{ ansible_env.HOME }} --verbose=2"
    register: result
    changed_when: 'result.stderr is search("LINK: ")'

  - name: Make fish default shell
    shell: chsh -s /usr/bin/fish
    become: yes
